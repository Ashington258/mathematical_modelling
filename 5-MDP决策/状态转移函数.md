<!--
 * @Author: Ashington ashington258@proton.me
 * @Date: 2024-09-08 01:45:24
 * @LastEditors: Ashington ashington258@proton.me
 * @LastEditTime: 2024-09-08 01:45:34
 * @FilePath: \mathematical_modelling\5-MDP决策\状态转移函数.md
 * @Description: 请填写简介
 * 联系方式:921488837@qq.com
 * Copyright (c) 2024 by ${git_name_email}, All Rights Reserved. 
-->
状态转移概率函数 \( P(s' | s, a) \) 是马尔可夫决策过程中描述系统动态变化的关键组件，它定义了在状态 \( s \) 下采取行动 \( a \) 后，系统转移到下一个状态 \( s' \) 的概率。在生产决策问题中，这个函数用于建模生产过程中的各类不确定性，例如次品率、装配成功率和检测结果等。

### 状态转移概率函数的定义

**状态转移概率函数 \( P(s' | s, a) \)：**
- 描述了从状态 \( s \) 经过行动 \( a \) 转移到状态 \( s' \) 的概率。
- 公式表示为：

  \[
  P(s' | s, a) = \text{Pr}(\text{下一状态为 } s' \mid \text{当前状态为 } s, \text{采取行动 } a)
  \]

### 定义步骤

1. **识别状态、行动和转移的影响因素：**
   - **状态（\( s \) 和 \( s' \)）：** 当前状态和下一个状态，分别包括零配件、半成品和成品的质量、数量等属性。
   - **行动（\( a \)）：** 检测、不检测、装配、销售和拆解等决策。
   - **影响因素：** 转移的概率受次品率、检测结果、装配成功率等影响。

2. **确定关键概率参数：**
   - **次品率（Defect Rate）：** 描述零配件、半成品和成品质量的概率。
   - **检测准确率：** 检测的灵敏度和特异性，决定检测是否正确识别合格和不合格品。
   - **装配成功率：** 在装配过程中，不同零配件成功组装成半成品或成品的概率。

3. **定义具体转移概率：**

   - **检测行动的转移概率：**
     - **成功检测：** 如果检测正确识别了零配件的质量状态（合格或次品），则转移到相应的状态。
     - **误检概率：** 包括误判合格为次品的概率和误判次品为合格的概率。

     \[
     P(s' | s, \text{Inspect}_{i}) = 
     \begin{cases}
     p_{\text{合格}} \times \text{检测准确率}, & \text{如果} \ s' \ \text{是正确检测后状态} \\
     (1 - p_{\text{合格}}) \times \text{误检率}, & \text{如果} \ s' \ \text{是错误检测后状态}
     \end{cases}
     \]

   - **装配行动的转移概率：**
     - **装配成功率：** 组合零配件成功组装成半成品的概率。
     - **装配失败率：** 零配件不匹配或导致次品的概率。

     \[
     P(s' | s, \text{Assemble}_{i,j}) = 
     \begin{cases}
     p_{\text{装配成功}}, & \text{如果} \ s' \ \text{是成功装配后的状态} \\
     1 - p_{\text{装配成功}}, & \text{如果} \ s' \ \text{是装配失败后的状态}
     \end{cases}
     \]

   - **销售行动的转移概率：**
     - **销售合格率：** 成品成功销售的概率，通常为检测准确度与质量合格率的组合。
     - **退货概率：** 市场上识别次品的概率，影响到后续的拆解或调换决策。

     \[
     P(s' | s, \text{Sell}_{12}) = 
     \begin{cases}
     p_{\text{合格}} \times p_{\text{成功销售}}, & \text{如果} \ s' \ \text{是销售成功状态} \\
     (1 - p_{\text{合格}}) \times p_{\text{退货}}, & \text{如果} \ s' \ \text{是退货状态}
     \end{cases}
     \]

   - **拆解行动的转移概率：**
     - **拆解成功率：** 成品拆解后，零配件回收的成功概率。

     \[
     P(s' | s, \text{Disassemble}_{12}) = 
     \begin{cases}
     p_{\text{拆解成功}}, & \text{如果} \ s' \ \text{是成功拆解后的状态} \\
     1 - p_{\text{拆解成功}}, & \text{如果} \ s' \ \text{是拆解失败后的状态}
     \end{cases}
     \]

4. **构建转移概率矩阵：**
   - 使用上述定义的概率为每对状态和行动构建一个转移概率矩阵 \( P \)，每个矩阵元素 \( P(s' | s, a) \) 表示对应的转移概率。
   - 例如，对于每个行动 \( a \)，矩阵中的每一行表示当前状态 \( s \)，每一列表示可能的下一状态 \( s' \)，矩阵元素表示在状态 \( s \) 采取行动 \( a \) 后转移到状态 \( s' \) 的概率。

### 实际示例

- **假设零配件1的次品率为10%，检测准确率为95%。**
  - 在状态 \( s \) （零配件1未检测），执行检测行动 \( a = \text{Inspect}_1 \)。
  - 转移到状态 \( s' \) （检测后零配件1状态为合格），概率：

    \[
    P(s' | s, \text{Inspect}_1) = 0.9 \times 0.95 = 0.855
    \]

  - 转移到状态 \( s'' \) （检测后零配件1状态为次品），概率：

    \[
    P(s'' | s, \text{Inspect}_1) = 0.1 \times 0.95 + 0.9 \times 0.05 = 0.145
    \]

### 总结

通过定义状态转移概率函数 \( P(s' | s, a) \)，可以精确描述生产过程中每个行动的结果和风险。这种建模方式可以帮助找到最优的生产决策路径，最大化生产效益或最小化成本与风险。在实际应用中，合理估计和优化这些概率参数是构建有效决策模型的关键。